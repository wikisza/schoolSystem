<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Rejestracja</title>
    <link rel="stylesheet" type="text/css" href="/static/css/styleLogin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&amp;display=swap" rel="stylesheet">
</head>
<body>
        <!--<img src="{{ url_for('static', filename='logo-no-background.png') }}" alt="HOTEL TROPICAL"> -->

        <section>

            <h1>Rejestracja</h1>
            <form method="POST" action="/register">
                <label for="firstName">Imię:</label>
                <input type="text" id="firstName" name="firstName" required>
                
                <label for="lastName">Nazwisko:</label>
                <input type="text" id="lastName" name="lastName" required>
                
                <label for="username">Nazwa użytkownika:</label>
                <input type="text" id="username" name="username" required>

                <label for="password">Hasło:</label>
                <input type="password" id="password" name="password" required><br>

                <label for="password2">Powtórz hasło:</label>
                <input type="password" id="password2" name="password2" required><br>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="phoneNumber">Numer telefonu:</label>
                <input type="text" id="phoneNumber" name="phoneNumber" placeholder="+48 xxx xxx xxx" required>

                <label for="address">Adres:</label>
                <input type="text" id="address" name="address" required>

                <label for="profession">Konto dla:</label>
                <select id="profession" name="profession">
                    <option value="administracja">Administracja</option>
                    <option value="nauczyciel">Nauczyciel</option>
                    <option value="uczen">Uczeń</option>
                    <option value="rodzic">Rodzic</option>
                </select>
                
                <button type="submit">Zarejestruj się</button>
            </form>
            <p>Masz już konto? <a href="/login">Zaloguj się</a></p>
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <ul>
                {% for message in messages %}
                <li>{{ message }}</li>
                {% endfor %}
            </ul>
            {% endif %}
            {% endwith %}
        </section>


        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const form = document.querySelector("form");
                const password = document.getElementById("password");
                const password2 = document.getElementById("password2");
                
                // Dodajemy miejsce na komunikat
                const errorMessage = document.createElement("div");
                errorMessage.style.color = "red";
                errorMessage.style.marginTop = "5px";
                password2.insertAdjacentElement("afterend", errorMessage);
        
                form.addEventListener("submit", function (event) {
                    if (password.value !== password2.value) {
                        event.preventDefault(); // Zatrzymaj wysyłanie formularza
                        errorMessage.textContent = "Hasła nie są takie same!";
                    } else {
                        errorMessage.textContent = ""; // Wyczyść komunikat w razie poprawy
                    }
                });
        
                // Opcjonalnie: sprawdzenie na bieżąco
                password2.addEventListener("input", function () {
                    if (password.value !== password2.value) {
                        errorMessage.textContent = "Hasła nie są takie same!";
                    } else {
                        errorMessage.textContent = "";
                    }
                });
            });
        </script>
        
</body>
</html>